# 毕业设计实施计划手册

> 项目名称：基于容器的云文件管理系统设计与实现  
> 创建时间：2025-12-23  
> 专业：网络工程

---

## 一、项目总览

### 1.1 核心目标

**将老师提供的文件管理系统进行 Docker 容器化部署**

### 1.2 当前状态

| 组件 | 状态 | 说明 |
|------|------|------|
| 后端 Spring Boot | ✅ 已运行 | 端口 8919 |
| 前端 Vue 3 | ✅ 已运行 | 端口 8917 |
| MySQL 8.0 | ✅ 已运行 | 端口 3306 |
| Redis 7 | ✅ 已运行 | 端口 6379 |

### 1.3 系统已有功能（老师范例）

- ✅ 文件上传/下载/删除
- ✅ 文件夹管理
- ✅ 秒传功能（MD5校验）
- ✅ 视频/文档转码
- ✅ 在线预览（视频/音频/图片/PDF）
- ✅ 回收站
- ✅ 视频/文档水印

### 1.4 新增功能（已完成）

| 功能 | 状态 | 说明 |
|------|------|------|
| 用户登录/注册 | ✅ 已完成 | JWT + BCrypt |
| 存储空间统计 | ✅ 已完成 | 显示已用/总空间 |
| 文件分享链接 | ✅ 已完成 | 生成分享码 |
| 文件搜索 | ✅ 已有 | 老师代码已实现 |

### 1.5 待完成工作

| 任务 | 状态 | 说明 |
|------|------|------|
| Docker 容器化配置 | ✅ 已完成 | Dockerfile、docker-compose.yml |
| Win11 部署测试 | ⏳ 待完成 | 在 WSL2/虚拟机中测试 |
| 毕业论文 | ⏳ 待完成 | 4月底开始 |
| 答辩 PPT | ⏳ 待完成 | 5月底 |

---

## 二、技术架构

```
┌─────────────────────────────────────────────────────────────┐
│                      用户浏览器                              │
│                   http://localhost                          │
└─────────────────────────────┬───────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                     Nginx (端口 80)                          │
│         /  → 前端静态文件    /api → 后端服务                 │
└─────────────────────────────────────────────────────────────┘
                              │
          ┌───────────────────┴───────────────────┐
          ▼                                       ▼
┌─────────────────────┐                 ┌─────────────────────┐
│  Vue 3 前端         │                 │  Spring Boot 后端    │
│  Element Plus       │                 │  端口 8919           │
└─────────────────────┘                 └───────────┬─────────┘
                                                    │
                              ┌─────────────────────┴─────────┐
                              ▼                               ▼
                    ┌─────────────────┐             ┌─────────────────┐
                    │  MySQL 8.0      │             │  Redis 7        │
                    │  端口 3306      │             │  端口 6379      │
                    └─────────────────┘             └─────────────────┘
```

---

## 三、Docker 容器化配置（已完成）

### 3.1 文件结构

```
yjxbishe/
├── docker-compose.yml          # Docker 编排文件
├── deploy.sh                   # 一键部署脚本
├── nginx/
│   └── nginx.conf              # Nginx 配置
├── lfs-master/
│   ├── Dockerfile              # 后端镜像
│   └── .dockerignore
└── lfs-vue-master/
    ├── Dockerfile              # 前端镜像
    └── .dockerignore
```

### 3.2 容器服务

| 服务 | 镜像 | 端口 | 说明 |
|------|------|------|------|
| nginx | nginx:alpine | 80 | 反向代理 |
| backend | 自构建 | 8919 | Spring Boot |
| mysql | mysql:8.0 | 3307→3306 | 数据库 |
| redis | redis:7-alpine | 6380→6379 | 缓存 |

### 3.3 部署命令

```bash
# Win11 WSL2/虚拟机中执行
cd yjxbishe
chmod +x deploy.sh
./deploy.sh

# 访问 http://localhost
# 账号: admin / 123456
```

---

## 四、数据库设计

### 4.1 现有表（老师范例）

| 表名 | 说明 |
|------|------|
| `lfs_file` | 文件表 |
| `lfs_file_trash` | 回收站记录表 |
| `lfs_file_trash_detail` | 回收站明细表 |
| `lfs_trans_file` | 转码文件表 |
| `lfs_file_thum` | 文件缩略图表 |
| `lfs_trans_template` | 转码模板表 |
| `lfs_trans_progress` | 转码进度表 |

### 4.2 新增表

| 表名 | 说明 |
|------|------|
| `sys_user` | 用户表（登录/注册） |
| `lfs_file_share` | 文件分享表 |

---

## 五、实施计划

### 5.1 时间线

| 阶段 | 时间 | 任务 | 状态 |
|------|------|------|------|
| 1 | 2024.12 | 环境搭建、功能开发 | ✅ 已完成 |
| 2 | 2025.1 | 容器化配置 | ✅ 已完成 |
| 3 | 2025.3 | 开题报告修改、中期汇报 | ⏳ 待完成 |
| 4 | 2025.4 | Win11 部署测试、代码验收 | ⏳ 待完成 |
| 5 | 2025.4-5 | 论文撰写 | ⏳ 待完成 |
| 6 | 2025.5 | 答辩准备 | ⏳ 待完成 |

### 5.2 3月任务

- [ ] 根据检查意见修改开题报告
- [ ] 提交中期汇报材料
- [ ] 在 Win11 上测试 Docker 部署

### 5.3 4月任务

- [ ] 完善系统功能、修复 bug
- [ ] 4月25日 代码验收
- [ ] 4月底 开始撰写论文大纲

### 5.4 5月任务

- [ ] 论文撰写（扩展到2万字）
- [ ] 论文排版
- [ ] 制作答辩 PPT
- [ ] 答辩

---

## 六、常用命令

### 6.1 macOS 开发环境

```bash
# 启动数据库服务
brew services start mysql
brew services start redis

# 启动后端
cd /Users/rexan/Desktop/个人文件/yjxbishe/lfs-master
export PATH="/usr/local/opt/openjdk@17/bin:$PATH"
mvn spring-boot:run -DskipTests

# 启动前端（新终端）
source ~/.nvm/nvm.sh && nvm use 18
cd /Users/rexan/Desktop/个人文件/yjxbishe/lfs-vue-master
npm run dev
```

### 6.2 Win11 Docker 部署

```bash
# 一键部署
./deploy.sh

# 查看状态
./deploy.sh status

# 查看日志
./deploy.sh logs

# 停止服务
./deploy.sh stop

# 清理数据
./deploy.sh clean
```

---

## 七、项目亮点（答辩用）

1. **容器化部署**：使用 Docker Compose 一键部署，包含 Nginx、后端、MySQL、Redis 四个服务
2. **多阶段构建**：Dockerfile 采用多阶段构建，优化镜像体积
3. **用户认证**：JWT Token + BCrypt 密码加密
4. **文件分享**：生成唯一分享码，支持过期时间
5. **环境变量配置**：支持通过环境变量覆盖配置，适应不同部署环境

---

## 八、Mac → Win11 迁移流程

### 8.1 迁移概述

```
┌─────────────────────────────────────────────────────────────┐
│                    Mac（开发环境）                           │
│  - 代码开发、调试                                            │
│  - 无法使用 Docker                                          │
│  - 完成所有功能开发后打包                                    │
└─────────────────────────────┬───────────────────────────────┘
                              │ 打包传输
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                   Win11（部署环境）                          │
│  - Docker Desktop                                           │
│  - 一键部署 docker-compose up                               │
│  - 答辩演示                                                  │
└─────────────────────────────────────────────────────────────┘
```

### 8.2 Mac 端操作（迁移前）

```bash
# 1. 确保代码完整
cd /Users/rexan/Desktop/个人文件/yjxbishe

# 2. 构建前端（可选，也可在Win11构建）
cd lfs-vue-master
npm run build
cd ..

# 3. 打包项目（排除大文件）
zip -r yjxbishe.zip . \
  -x "*.git*" \
  -x "*node_modules*" \
  -x "*target*" \
  -x "*.class" \
  -x "*.jar"

# 4. 传输到 Win11（U盘/网盘/局域网）
```

### 8.3 Win11 端操作（迁移后）

详见 `Win11部署指导手册.md`

### 8.4 迁移检查清单

**Mac 端**：
- [ ] 所有功能开发完成
- [ ] 代码无明显 Bug
- [ ] Docker 配置文件完整
- [ ] SQL 初始化脚本完整
- [ ] 项目打包完成

**Win11 端**：
- [ ] Docker Desktop 安装并启动
- [ ] Node.js 安装完成
- [ ] 项目解压成功
- [ ] 前端构建成功
- [ ] docker compose up 成功
- [ ] 系统访问正常
- [ ] 所有功能测试通过

---

## 九、相关文档索引

| 文档 | 说明 |
|------|------|
| `AI_CONTEXT.md` | AI 上下文恢复文件 |
| `Win11部署指导手册.md` | Win11 保姆级部署指南 |
| `毕设论文大纲.md` | 论文结构大纲（供 Gemini 使用） |
| `开题报告.md` | 开题报告内容 |

---

*最后更新：2025-12-30*
