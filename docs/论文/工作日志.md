# 毕设工作日志

> 项目：基于容器的云文件管理系统设计与实现  
> 专业：网络工程

---

## 📋 项目概述

**核心目标**：将老师提供的文件管理系统进行 **Docker 容器化部署**

**开发环境**：macOS 本地开发  
**部署环境**：Win11 (WSL2/虚拟机) Docker 部署

---

## ✅ 已完成的工作

### 2025-12-23

#### 1. 开发环境搭建
- 安装了 JDK 17、Maven、MySQL、Redis
- 安装了 Node.js 18
- 项目可以正常运行 http://localhost:8917

#### 2. 新增功能实现

##### 功能1：文件搜索 ✅
- **状态**：已有（老师代码已实现）
- **原理**：后端 `FileService.listByPage()` 使用 SQL LIKE 模糊查询

##### 功能2：存储空间统计 ✅
- **原理**：SQL `SUM(file_size)` 聚合查询
- **后端**：
  - `FileMapper.sumTotalFileSize()` - 统计总大小
  - `FileController.storageStats()` - 返回统计接口
- **前端**：侧边栏底部显示进度条

##### 功能3：简单用户登录 ✅
- **原理**：JWT Token + BCrypt 密码加密
- **后端**：
  - `User.java` - 用户实体
  - `UserService.java` - 登录/注册逻辑
  - `UserController.java` - 接口
  - `JwtConfig.java` - Token 生成/验证
- **前端**：
  - `Login.vue` - 登录/注册页面
  - 路由守卫 - 未登录跳转登录页
  - 顶部导航 - 显示用户信息和退出按钮
- **默认用户**：admin / 123456

##### 功能4：文件分享链接 ✅
- **原理**：生成唯一分享码，访问时验证有效性
- **后端**：
  - `FileShare.java` - 分享实体
  - `FileShareService.java` - 创建/访问分享
  - `ShareController.java` - 接口
- **前端**：
  - 文件详情页新增"分享"Tab
  - `ShareAccess.vue` - 分享访问页面

---

## 📝 待完成的工作

### 🎯 核心任务：Docker 容器化部署
- [x] 编写后端 Dockerfile
- [x] 编写前端 Dockerfile  
- [x] 编写 docker-compose.yml
- [x] 配置 nginx 反向代理
- [x] 编写一键部署脚本
- [x] 修改配置支持环境变量
- [ ] 在 Win11 上测试部署

### 📄 文档
- [ ] 撰写毕业论文
- [ ] 准备答辩 PPT

---

## 📅 毕设工作计划（2025年3月-5月）

### 3月份：开题修改 + 中期汇报

| 时间 | 任务 | 具体内容 |
|------|------|----------|
| 3月1日-10日 | 修改开题报告 | 根据前期检查意见修改，补充参考文献（确保英文≥3篇） |
| 3月11日-25日 | 项目实质推进 | 完成Docker容器化部署（Dockerfile、docker-compose.yml） |
| 3月26日-31日 | 提交中期汇报 | 汇报当前进展：环境搭建完成、4个新功能已实现、容器化进度 |

**3月底交付物：**
- [ ] 修改后的开题报告
- [ ] 中期汇报材料
- [ ] Docker部署方案初版

---

### 4月份：系统完善 + 论文启动

| 时间 | 任务 | 具体内容 |
|------|------|----------|
| 4月1日-15日 | 系统功能完善 | 完善容器化部署、测试各功能、修复bug |
| 4月16日-25日 | 代码验收准备 | 整理代码、编写部署文档、准备演示 |
| 4月25日 | **第一次代码验收** | 确保系统能正常运行演示 |
| 4月26日-30日 | 论文大纲撰写 | 完成论文初稿大纲（章节划分、各节内容、核心观点） |

**4月底交付物：**
- [ ] 可运行的完整系统
- [ ] 部署文档
- [ ] 论文大纲初稿

---

### 5月份：论文撰写 + 答辩准备

| 时间 | 任务 | 具体内容 |
|------|------|----------|
| 5月1日-10日 | 论文内容扩展 | 根据大纲修改意见，扩充至2万字左右 |
| 5月11日-15日 | 论文精简优化 | 删减冗余内容，优化表述 |
| 5月15日左右 | **排版讲解会议** | 参加会议，学习论文排版规范 |
| 5月16日-22日 | 论文排版 | 按学院要求完成正式排版 |
| 5月23日-25日 | 答辩准备 | 制作PPT、准备演示、预演答辩 |
| 5月25日左右 | **答辩流程讲解** | 参加会议，了解答辩细节 |
| 5月底 | 最终答辩 | 完成答辩与验收 |

**5月底交付物：**
- [ ] 正式排版的毕业论文
- [ ] 答辩PPT
- [ ] 系统演示视频（备用）

---

### 🤖 AI协助任务清单

到时候直接发给AI完成：

**3月份**
1. 修改开题报告 - 根据检查意见修改
2. 编写中期汇报材料 - 说明项目进展
3. 完成Docker容器化 - Dockerfile、docker-compose.yml、nginx配置、一键部署脚本

**4月份**
4. 系统功能测试与完善 - 修复bug、优化功能
5. 编写部署文档 - 详细的安装部署步骤
6. 撰写论文大纲 - 章节划分、各节内容规划

**5月份**
7. 扩展论文内容 - 从大纲扩展到2万字
8. 论文精简优化 - 删减冗余、优化表述
9. 论文排版 - 按学院规范排版
10. 制作答辩PPT - 准备答辩演示

---

## 🚀 快速启动

```bash
# 1. 首次运行：初始化新增的数据库表
mysql -u root lfs < /Users/rexan/Desktop/个人文件/yjxbishe/lfs-master/sql/init_new_tables.sql

# 2. 启动数据库服务
brew services start mysql
brew services start redis

# 3. 启动后端（新终端）
cd /Users/rexan/Desktop/个人文件/yjxbishe/lfs-master
export PATH="/usr/local/opt/openjdk@17/bin:$PATH"
mvn spring-boot:run -DskipTests

# 4. 启动前端（新终端）
source ~/.nvm/nvm.sh
nvm use 18
cd /Users/rexan/Desktop/个人文件/yjxbishe/lfs-vue-master
npm run dev
```

访问地址：http://localhost:8917  
默认账号：admin / 123456

---

## 📁 项目结构

```
yjxbishe/
├── lfs-master/              # 后端 Spring Boot 项目
│   └── sql/
│       ├── lfs.sql          # 原始数据库脚本
│       └── init_new_tables.sql  # 新增表脚本
├── lfs-vue-master/          # 前端 Vue 项目
│   └── src/views/
│       ├── login/Login.vue  # 登录页面
│       └── share/ShareAccess.vue  # 分享访问页
├── AI_CONTEXT.md            # AI 上下文恢复文件
└── 工作日志.md              # 本文件
```

---

## 🔧 新增功能原理说明

### JWT 认证原理
```
登录流程：
用户名+密码 → 后端验证(BCrypt) → 生成JWT Token → 返回前端
                                                    ↓
后续请求：                                      存储localStorage
前端请求 → Header携带token → 后端拦截器验证 → 放行/拒绝
```

### 文件分享原理
```
创建分享：
选择文件 → 设置有效期 → 生成8位分享码 → 存入数据库 → 返回分享链接

访问分享：
分享链接 → 提取分享码 → 查询数据库 → 验证有效期 → 返回文件下载链接
```

---

## 💡 重要提醒

1. **首次运行需要执行数据库脚本**：`init_new_tables.sql`
2. **默认管理员账号**：admin / 123456
3. **核心是容器化**：功能已完成，下一步是 Docker 部署

---

*最后更新：2025-12-23*
